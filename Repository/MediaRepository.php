<?php

namespace Inwicast\ClarolinePluginBundle\Repository;

use Doctrine\ORM\EntityRepository;
use Inwicast\ClarolinePluginBundle\Entity\Media;

/**
 * MediaRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class MediaRepository extends EntityRepository
{
    public function findByWidget($widgetInstance)
    {
        $qb = $this->_em->createQueryBuilder();
        $qb->select('media')
            ->from('Inwicast\ClarolinePluginBundle\Entity\Media', 'media')
            ->where('media.widgetInstance = :widgetinstance')
            ->setParameter("widgetinstance", $widgetInstance);

        $result = $qb->getQuery()->getResult();

        if (sizeof($result) > 0) {
            return $result[0];
        } else {
            return $result;
        }
    }
}
